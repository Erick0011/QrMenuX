{% extends "dashboard/dashboard_base.html" %} {% block title %}Perfil{% endblock
%} {% block content %}
<div class="mx-auto" style="max-width: 600px">
  <h3>Editar Perfil</h3>
  <form method="POST" id="profileForm" novalidate>
    <input type="hidden" name="csrf_token" value="{{ csrf_token() }}" />

    <hr />
    <h5 class="text-success">Dados do Usuário</h5>
    <div class="mb-3">
      <label>Email de login</label>
      <input
        type="email"
        name="user_email"
        class="form-control"
        value="{{ user.email }}"
        required
      />
      <div class="invalid-feedback">Informe um email válido.</div>
    </div>
    <div class="mb-3">
      <label>Nova senha (deixe em branco para manter)</label>
      <input
        type="password"
        name="user_password"
        class="form-control"
        minlength="6"
      />
      <div class="invalid-feedback">
        A senha deve ter pelo menos 6 caracteres.
      </div>
    </div>

    <hr />
    <h5 class="text-success">Dados do Restaurante</h5>
    <div class="mb-3">
      <label>Nome do restaurante</label>
      <input
        type="text"
        class="form-control"
        value="{{ restaurant.name }}"
        disabled
      />
    </div>
    <div class="mb-3">
      <label>Slug</label>
      <input
        type="text"
        class="form-control"
        value="{{ restaurant.slug }}"
        disabled
      />
    </div>
    <div class="mb-3">
      <label>Email de contacto</label>
      <input
        type="email"
        name="restaurant_email"
        class="form-control"
        value="{{ restaurant.email }}"
        required
      />
      <div class="invalid-feedback">Informe um email válido.</div>
    </div>
    <div class="mb-3">
      <label>Telefone / WhatsApp</label>
      <input
        type="text"
        name="restaurant_phone"
        class="form-control"
        value="{{ restaurant.phone }}"
        pattern="^\+?\d{8,15}$"
        required
      />
      <div class="invalid-feedback">
        Informe um telefone válido. Com o codigo do país (Ex: +244 9XX XXX XXX)
      </div>
    </div>
    <div class="mb-3">
      <label>Endereço</label>
      <input
        type="text"
        name="restaurant_address"
        class="form-control"
        value="{{ restaurant.address or '' }}"
        placeholder="Ex: Rua Principal, 123, Bairro, Cidade"
        required
        minlength="5"
      />
      <div class="invalid-feedback">Informe um endereço válido.</div>
    </div>
    <div class="mb-3">
      <label>Cor do tema</label>
      <input
        type="color"
        name="theme_color"
        class="form-control form-control-color"
        value="{{ restaurant.theme_color }}"
        required
      />
      <div class="invalid-feedback">Escolha uma cor.</div>
    </div>
    <div class="mb-3">
      <label>Descrição</label>
      <textarea
        name="restaurant_description"
        class="form-control"
        rows="3"
        required
        minlength="10"
      >
{{ restaurant.description }}</textarea
      >
      <div class="invalid-feedback">
        A descrição deve ter pelo menos 10 caracteres.
      </div>
    </div>
    <button type="submit" class="btn btn-success">
      <i class="bi bi-check-circle"></i> Salvar alterações
    </button>
  </form>
</div>

<script>
  // Bootstrap 5 validation
  (function () {
    "use strict";
    var forms = document.querySelectorAll("#profileForm");
    Array.prototype.slice.call(forms).forEach(function (form) {
      form.addEventListener(
        "submit",
        function (event) {
          if (!form.checkValidity()) {
            event.preventDefault();
            event.stopPropagation();
          }
          form.classList.add("was-validated");
        },
        false
      );
    });
  })();
</script>
{% endblock %}
